import{s as i,r as p,u as $,a as L,j as t,x as R,m as N,h as O,k as A,i as F,L as G}from"./index-9668496b.js";import{B as H,M as U,a as V,W as _,I as q,T as J,F as K,C as Q,P as X,c as Y,e as g,f as u,g as Z,h as tt,i as et,b as D,l as z,d as I,s as S,R as it}from"./snack-image-5ca0f01a.js";const nt=i.div`
  display: flex;
  flex-wrap: wrap;
  max-width: 1372px;
  justify-content: space-between;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
  @media screen and (min-width: 834px) and (max-width: 1440px) {
    max-width: 834px;
    justify-content: center;
    gap: 20px;
  }
  @media screen and (max-width: 834px) {
    max-width: 320px;
    justify-content: center;
    gap: 100px;
  }
`,at=i.div`
  height: 278px;
  width: 676px;
  margin-top: 16px;
  margin-right: 0;
  @media screen and (min-width: 834px) and (max-width: 1439px) {
    padding-bottom: 44px;
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(1) {
      margin-right: 20px;
      margin-bottom: 20px;
    }
    &:nth-child(2) {
      margin-bottom: 20px;
    }
    &:nth-child(3) {
      margin-right: 20px;
    }
  }

  @media screen and (min-width: 834px) and (max-width: 1440px) {
    width: 780px;
  }

  @media screen and (max-width: 834px) {
    width: 300px;
  }
`,rt=i.img`
  width: 36px;
  height: 36px;
`,ot=i.div`
  display: flex;
  align-items: center;
  margin-bottom: 6px;
  flex-wrap: wrap;
  @media screen and (max-width: 834px) {
    flex-wrap: wrap;
  }
`;i.div`
  @media screen and (max-width: 834px) {
  }
`;const st=i.h2`
  font-family: Poppins;
  font-size: 22px;
  font-style: normal;
  font-weight: 400;
  line-height: 32px;
  margin-left: 12px;
  @media screen and (max-width: 834px) {
    font-size: 18px;
    line-height: 26px;
  }
`,lt=i.ul`
  display: flex;
  margin-left: 126px;
  gap: 20px;
  @media screen and (min-width: 834px) and (max-width: 1440px) {
    margin-left: 196px;
    gap: 32px;
  }
  @media screen and (max-width: 834px) {
    margin-left: 0;
    width: 178px;
    flex-wrap: wrap;
    margin-top: 12px;
  }
`,P=i.div`
  display: flex;
`,v=i.li`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  color: var(--primary-title-text-color);
`,C=i.div`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 500;
  line-height: 20px;
  color: var(--primary-text-color);
  margin-left: 4px;
`,dt=i.div`
  border-radius: 12px;
  background-color: var(--secondary-text-color);
  padding: 32px 14px;
  @media screen and (max-width: 834px) {
    padding: 16px 12px;
  }
`,ct=i.ul`
  display: flex;
  flex-direction: column;
  gap: 32px;
  overflow-y: scroll;
  height: 232px;
  scrollbar-width: thin; /* Для Firefox */
  scrollbar-color: transparent transparent; /* Для Firefox */

  &::-webkit-scrollbar {
    width: 12px;
  }

  &::-webkit-scrollbar-thumb {
    background-color: transparent;
  }

  @media screen and (max-width: 834px) {
    gap: 16px;
  }
  @media screen and (min-width: 834px) {
    height: 176px;
  }
`,B=i.li`
  display: flex;
  position: relative;
  @media screen and (max-width: 834px) {
    height: 44px;
  }
`,E=i.div`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: 20px;
  color: var(--primary-title-text-color);
  width: 16px;
  display: flex;
  justify-content: center;
`,pt=i.div`
  @media screen and (max-width: 834px) {
    margin-left: 16px;
    position: relative;
  }
`,T=i.div`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  color: var(--primary-title-text-color);
  margin-left: 16px;
  width: 260px;
  height: 20px;
  @media screen and (max-width: 834px) {
    width: 176px;
    margin-left: 0;
    margin-bottom: 6px;
  }
`,W=i.ul`
  display: flex;
  margin-left: 32px;
  gap: 32px;
  @media screen and (min-width: 834px) and (max-width: 1440px) {
    margin-left: 110px;
  }
  @media screen and (max-width: 834px) {
    gap: 6px;
    margin-left: 0;
  }
`,M=i.div`
  display: flex;
`,k=i.div`
  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: 18px;
`,x=i.li`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  width: 80px;
  height: 20px;
  color: var(--primary-title-text-color);
  &:last-child {
    width: 30px;
  }
  /* @media screen and (min-width: 834px) and (max-width: 1440px){
         margin-left:32px;
    } */
  @media screen and (max-width: 834px) {
    width: auto;
    font-size: 12px;
    line-height: 18px;
    margin-left: 6px;
  }
`,ht=i.div`
  margin-left: 40px;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: opacity 0.2s;
  &:hover,
  &:focus {
    opacity: 0.8;
  }

  @media screen and (min-width: 834px) and (max-width: 1440px) {
    /* margin-left:20px; */
  }
  @media screen and (max-width: 834px) {
    margin-left: 17px;
    align-items: flex-start;
    margin: 0;
    position: absolute;
    left: 211px;
  }
`,xt=i.svg`
  width: 16px;
  height: 16px;
  stroke: var(--primary-text-color);
`,mt=i.p`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  margin-left: 6px;
`,ft=i.div`
  display: flex;
  /* align-items: center; */
  align-items: stretch;
  margin-left: 16px;
  cursor: pointer;
  transition: opacity 0.2s;
  &:hover,
  &:focus {
    opacity: 0.8;
  }
  @media screen and (max-width: 834px) {
  }
`,gt=i.svg`
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  stroke: var(--primary-btn-color);
`,ut=i.p`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 500;
  line-height: 20px;
  color: var(--primary-btn-color);
  margin-left: 6px;
`;function yt({onClose:l,image:y,mealType:m,onRecord:w,meal:a}){p.useEffect(()=>{console.log(a)},[a]);const h=$(),[j,b]=p.useState([{name:a?a.name:"",nutrition:{carbohydrates:a?a.nutrition.carbohydrates:"",protein:a?a.nutrition.protein:"",fat:a?a.nutrition.fat:""},calories:a?a.calories:""}]);p.useEffect(()=>{b([{name:a?a.name:"",nutrition:{carbohydrates:a?a.nutrition.carbohydrates:"",protein:a?a.nutrition.protein:"",fat:a?a.nutrition.fat:""},calories:a?a.calories:""}])},[a]);const d=L({initialValues:{mealType:m,foods:j},onSubmit:async o=>{try{if(o.foods&&o.foods.length>0&&o.foods[0]){const n=o.foods[0],e={mealType:m.toLowerCase(),foodDetails:{name:n.name?n.name:"string",nutrition:{carbohydrates:n.nutrition.carbohydrates?Number(n.nutrition.carbohydrates):0,protein:n.nutrition.protein?Number(n.nutrition.protein):0,fat:n.nutrition.fat?Number(n.nutrition.fat):0},calories:n.calories?Number(n.calories):0}};console.log({foodIntakeData:e}),h(R({foodId:a._id,foodIntakeData:e})),w(e),setTimeout(()=>{h(N())},100),l()}}catch(n){console.error(n)}}}),f=o=>{o.currentTarget===o.target&&l()};return t.jsx(H,{onClick:f,children:t.jsxs(U,{children:[t.jsx(V,{children:"Edit your meal"}),t.jsxs(_,{children:[t.jsx(q,{src:y,alt:"Plate"}),t.jsx(J,{children:m})]}),t.jsxs(K,{onSubmit:d.handleSubmit,children:[t.jsx(Q,{children:d.values.foods.map((o,n)=>t.jsx(X,{children:t.jsxs(Y,{children:[t.jsx(g,{children:t.jsx(u,{type:"text",id:`name-${n}`,name:`foods[${n}].name`,placeholder:"The name of the product or dish",onChange:d.handleChange,value:o.name})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`carbonohidrates-${n}`,name:`foods[${n}].nutrition.carbohydrates`,placeholder:"Carbonoh.",onChange:d.handleChange,value:o.nutrition.carbohydrates})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`protein-${n}`,name:`foods[${n}].nutrition.protein`,placeholder:"Protein",onChange:d.handleChange,value:o.nutrition.protein})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`fat-${n}`,name:`foods[${n}].nutrition.fat`,placeholder:"Fat",onChange:d.handleChange,value:o.nutrition.fat})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`calories-${n}`,name:`foods[${n}].calories`,placeholder:"Calories",onChange:d.handleChange,value:o.calories})})]})},n))}),t.jsxs(Z,{children:[t.jsx(tt,{type:"button",onClick:l,children:"Cancel"}),t.jsx(et,{type:"submit",children:"Confirm"})]})]})]})})}const wt=()=>{const l=O(A),[y,m]=p.useState([{title:"Breakfast",image:D,totalCarbohydrates:0,totalProtein:0,foods:[]},{title:"Lunch",image:z,totalCarbohydrates:0,totalFat:0,totalProtein:0,foods:[]},{title:"Dinner",image:I,totalCarbohydrates:0,foods:[]},{title:"Snack",image:S,totalCarbohydrates:0,foods:[]}]);p.useEffect(()=>{if(l&&l.consumedMealsByDay){const e=l.consumedMealsByDay.breakfast||{},r=l.consumedMealsByDay.lunch||{},s=l.consumedMealsByDay.dinner||{},c=l.consumedMealsByDay.snack||{};e&&r&&s&&s&&m([{title:"Breakfast",image:D,totalCarbohydrates:e!==0?e.totalCarbohydrates:0,totalFat:e!==0?e.totalFat:0,totalProtein:e!==0?e.totalProtein:0,foods:e!==0?e.foods?e.foods:[]:[]},{title:"Lunch",image:z,totalCarbohydrates:r!==0?r.totalCarbohydrates:0,totalFat:r!==0?r.totalFat:0,totalProtein:r!==0?r.totalProtein:0,foods:r!==0?r.foods?r.foods:[]:[]},{title:"Dinner",image:I,totalCarbohydrates:s!==0?s.totalCarbohydrates:0,totalFat:s!==0?s.totalFat:0,totalProtein:s!==0?s.totalProtein:0,foods:s!==0?s.foods?s.foods:[]:[]},{title:"Snack",image:S,totalCarbohydrates:c!==0?c.totalCarbohydrates:0,totalFat:c!==0?c.totalFat:0,totalProtein:c!==0?c.totalProtein:0,foods:c!==0?c.foods?c.foods:[]:[]}])}},[l]);const[w,a]=p.useState(window.innerWidth<834);p.useEffect(()=>{const e=()=>{a(window.innerWidth<834)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const[h,j]=p.useState(null),[b,d]=p.useState(null),f=e=>{j(e!==h?e:null)},o=e=>{d(e!==h?e:null)},n=()=>{f()};return t.jsx(nt,{children:y&&y.map(e=>t.jsxs(at,{children:[h===e&&t.jsx(it,{styles:{zIndex:"10"},onClose:()=>f(e),image:e.image,mealType:e.title,onRecord:n}),t.jsxs(ot,{children:[t.jsx(rt,{src:e.image,alt:"Plate"}),t.jsx(st,{children:e.title}),t.jsxs(lt,{children:[t.jsxs(P,{children:[t.jsx(v,{children:"Carbonohidrates:"}),t.jsx(C,{children:e.totalCarbohydrates})]}),t.jsxs(P,{children:[t.jsx(v,{children:"Protein:"}),t.jsx(C,{children:e.totalFat})]}),t.jsxs(P,{children:[t.jsx(v,{children:"Fat:"}),t.jsx(C,{children:e.totalProtein})]})]})]}),t.jsx(dt,{children:t.jsxs(ct,{children:[e.foods.map((r,s)=>t.jsxs(B,{children:[t.jsx(E,{children:s+1}),w?t.jsxs(pt,{children:[t.jsx(T,{children:r.name}),t.jsxs(W,{children:[t.jsxs(M,{children:[t.jsx(k,{children:"Carb."}),t.jsx(x,{children:r.nutrition.carbohydrates})]}),t.jsxs(M,{children:[t.jsx(k,{children:"Prot."}),t.jsx(x,{children:r.nutrition.protein})]}),t.jsxs(M,{children:[t.jsx(k,{children:"Fat."}),t.jsx(x,{children:r.nutrition.fat})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx(T,{children:r.name}),t.jsxs(W,{children:[t.jsx(x,{children:r.nutrition.carbohydrates}),t.jsx(x,{children:r.nutrition.protein}),t.jsx(x,{children:r.nutrition.fat})]})]}),t.jsxs(ht,{onClick:()=>o(r),children:[t.jsx(xt,{children:t.jsx("use",{href:`${F}#icon-edit`})}),t.jsx(mt,{children:"Edit"})]}),b===r&&t.jsx(yt,{styles:{zIndex:"100"},onClose:()=>o(e),image:e.image,mealType:e.title,onRecord:n,meal:r})]},s)),t.jsxs(B,{children:[t.jsx(E,{children:e.foods.length+1}),t.jsxs(ft,{children:[t.jsx(gt,{children:t.jsx("use",{href:`${F}#icon-add`})}),t.jsx(ut,{onClick:()=>f(e),children:"Record your meal"})]})]})]})})]},e.title))})},jt=i.div`
        display: flex;
        align-items: center;
        max-width: 1372px;
        margin-left: auto;
        margin-right: auto;
        @media screen and (min-width: 834px) and (max-width: 1440px){
                width: 780px;
                /* padding-left: 16px; */
        }
        @media screen and (max-width: 834px){
                max-width: 320px;   
        }
`,bt=i.h1`
       font-family: Poppins;
        font-size: 30px;
        font-style: normal;
        font-weight: 500;
        line-height: 36px;
        margin-right: 12px;
        @media screen and (max-width: 834px) {
                font-size: 24px;
                line-height: 30px;
        }
`,Pt=i(G)`
        width: 24px;
        height: 24px;
        display: inline-block;
        cursor: pointer;      
        margin-right: 12px ;
`,vt=i.svg`
        width: 24px;
        height: 24px;
        stroke: var(--primary-text-color);
        fill:transparent;
        transform: rotate(180deg);
        transition:
                stroke 0.3s;
        &:hover,
        &:focus {
                stroke: var(--primary-btn-color);
        }
        
`,Ct=()=>t.jsxs(jt,{children:[t.jsx(Pt,{to:"/main",children:t.jsx(vt,{children:t.jsx("use",{href:`${F}#icon-arrow-right`})})}),t.jsx(bt,{children:"Diary"})]});function Ft(){return t.jsxs("div",{children:[t.jsx(Ct,{}),t.jsx(wt,{})]})}export{Ft as default};
