import{s as a,r as c,u as R,a as N,j as t,x as O,h as B,k as A,y as G,i as D,L as H}from"./index-a8fe235b.js";import{B as V,M as U,a as _,W as q,I as J,T as K,F as Q,C as X,P as Y,c as Z,e as g,f as u,g as tt,t as et,h as it,i as at,j as nt,b as z,l as I,d as S,s as E,R as rt}from"./snack-image-0fde2435.js";const ot=a.div`
  display: flex;
  flex-wrap: wrap;
  max-width: 1372px;
  justify-content: space-between;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
  @media screen and (min-width: 834px) and (max-width: 1440px) {
    max-width: 834px;
    justify-content: center;
    gap: 20px;
  }
  @media screen and (max-width: 834px) {
    max-width: 320px;
    justify-content: center;
    gap: 100px;
  }
`,st=a.div`
  height: 278px;
  width: 676px;
  margin-top: 16px;
  margin-right: 0;
  @media screen and (min-width: 834px) and (max-width: 1439px) {
    padding-bottom: 44px;
  }

  @media screen and (min-width: 1440px) {
    &:nth-child(1) {
      margin-right: 20px;
      margin-bottom: 20px;
    }
    &:nth-child(2) {
      margin-bottom: 20px;
    }
    &:nth-child(3) {
      margin-right: 20px;
    }
  }

  @media screen and (min-width: 834px) and (max-width: 1440px) {
    width: 780px;
  }

  @media screen and (max-width: 834px) {
    width: 300px;
  }
`,lt=a.img`
  width: 36px;
  height: 36px;
`,dt=a.div`
  display: flex;
  align-items: center;
  margin-bottom: 6px;
  flex-wrap: wrap;
  @media screen and (max-width: 834px) {
    flex-wrap: wrap;
  }
`;a.div`
  @media screen and (max-width: 834px) {
  }
`;const ct=a.h2`
  font-family: Poppins;
  font-size: 22px;
  font-style: normal;
  font-weight: 400;
  line-height: 32px;
  margin-left: 12px;
  @media screen and (max-width: 834px) {
    font-size: 18px;
    line-height: 26px;
  }
`,pt=a.ul`
  display: flex;
  margin-left: 126px;
  gap: 20px;
  @media screen and (min-width: 834px) and (max-width: 1440px) {
    margin-left: 196px;
    gap: 32px;
  }
  @media screen and (max-width: 834px) {
    margin-left: 0;
    width: 178px;
    flex-wrap: wrap;
    margin-top: 12px;
  }
`,v=a.div`
  display: flex;
`,k=a.li`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  color: var(--primary-title-text-color);
`,C=a.div`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 500;
  line-height: 20px;
  color: var(--primary-text-color);
  margin-left: 4px;
`,ht=a.div`
  border-radius: 12px;
  background-color: var(--secondary-text-color);
  padding: 32px 14px;
  @media screen and (max-width: 834px) {
    padding: 16px 12px;
  }
`,xt=a.ul`
  display: flex;
  flex-direction: column;
  gap: 32px;
  overflow-y: scroll;
  height: 232px;
  scrollbar-width: thin; /* Для Firefox */
  scrollbar-color: transparent transparent; /* Для Firefox */

  &::-webkit-scrollbar {
    width: 12px;
  }

  &::-webkit-scrollbar-thumb {
    background-color: transparent;
  }

  @media screen and (max-width: 834px) {
    gap: 16px;
  }
  @media screen and (min-width: 834px) {
    height: 176px;
  }
`,T=a.li`
  display: flex;
  position: relative;
  @media screen and (max-width: 834px) {
    height: 44px;
  }
`,W=a.div`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 600;
  line-height: 20px;
  color: var(--primary-title-text-color);
  width: 16px;
  display: flex;
  justify-content: center;
`,mt=a.div`
  @media screen and (max-width: 834px) {
    margin-left: 16px;
    position: relative;
  }
`,$=a.div`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  color: var(--primary-title-text-color);
  margin-left: 16px;
  width: 260px;
  height: 20px;
  @media screen and (max-width: 834px) {
    width: 176px;
    margin-left: 0;
    margin-bottom: 6px;
  }
`,L=a.ul`
  display: flex;
  margin-left: 32px;
  gap: 32px;
  @media screen and (min-width: 834px) and (max-width: 1440px) {
    margin-left: 110px;
  }
  @media screen and (max-width: 834px) {
    gap: 6px;
    margin-left: 0;
  }
`,M=a.div`
  display: flex;
`,F=a.div`
  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: 18px;
`,x=a.li`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  width: 80px;
  height: 20px;
  color: var(--primary-title-text-color);
  &:last-child {
    width: 30px;
  }
  /* @media screen and (min-width: 834px) and (max-width: 1440px){
         margin-left:32px;
    } */
  @media screen and (max-width: 834px) {
    width: auto;
    font-size: 12px;
    line-height: 18px;
    margin-left: 6px;
  }
`,ft=a.div`
  margin-left: 40px;
  display: flex;
  align-items: center;
  cursor: pointer;
  transition: opacity 0.2s;
  &:hover,
  &:focus {
    opacity: 0.8;
  }

  @media screen and (min-width: 834px) and (max-width: 1440px) {
    /* margin-left:20px; */
  }
  @media screen and (max-width: 834px) {
    margin-left: 17px;
    align-items: flex-start;
    margin: 0;
    position: absolute;
    left: 211px;
  }
`,gt=a.svg`
  width: 16px;
  height: 16px;
  stroke: var(--primary-text-color);
`,ut=a.p`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 400;
  line-height: 20px;
  margin-left: 6px;
`,yt=a.div`
  display: flex;
  /* align-items: center; */
  align-items: stretch;
  margin-left: 16px;
  cursor: pointer;
  transition: opacity 0.2s;
  &:hover,
  &:focus {
    opacity: 0.8;
  }
  @media screen and (max-width: 834px) {
  }
`,wt=a.svg`
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  stroke: var(--primary-btn-color);
`,jt=a.p`
  font-family: Poppins;
  font-size: 14px;
  font-style: normal;
  font-weight: 500;
  line-height: 20px;
  color: var(--primary-btn-color);
  margin-left: 6px;
`;function bt({onClose:s,image:y,mealType:h,onRecord:w,meal:n}){c.useEffect(()=>{console.log(n)},[n]);const j=R(),[m,b]=c.useState([{name:n?n.name:"",nutrition:{carbohydrates:n?n.nutrition.carbohydrates:"",protein:n?n.nutrition.protein:"",fat:n?n.nutrition.fat:""},calories:n?n.calories:""}]);c.useEffect(()=>{b([{name:n?n.name:"",nutrition:{carbohydrates:n?n.nutrition.carbohydrates:"",protein:n?n.nutrition.protein:"",fat:n?n.nutrition.fat:""},calories:n?n.calories:""}])},[n]);const d=N({initialValues:{mealType:h,foods:m},onSubmit:async o=>{try{if(o.foods&&o.foods.length>0&&o.foods[0]){const i=o.foods[0],e={mealType:h.toLowerCase(),foodDetails:{name:i.name?i.name:"string",nutrition:{carbohydrates:i.nutrition.carbohydrates?Number(i.nutrition.carbohydrates):0,protein:i.nutrition.protein?Number(i.nutrition.protein):0,fat:i.nutrition.fat?Number(i.nutrition.fat):0},calories:i.calories?Number(i.calories):0}};console.log({foodIntakeData:e});const r={mealType:"breakfast",foodDetails:{name:"33",calories:33,nutrition:{carbohydrates:33,fat:33,protein:33}}};j(O(n._id,{foodIntakeData:e})),w(e),s()}}catch(i){console.error(i)}}}),P=o=>{o.currentTarget===o.target&&s()},f=o=>{const i=[...d.values.foods];i.splice(o,1),d.setFieldValue("foods",i)};return t.jsx(V,{onClick:P,children:t.jsxs(U,{children:[t.jsx(_,{children:"Edit your meal"}),t.jsxs(q,{children:[t.jsx(J,{src:y,alt:"Plate"}),t.jsx(K,{children:h})]}),t.jsxs(Q,{onSubmit:d.handleSubmit,children:[t.jsx(X,{children:d.values.foods.map((o,i)=>t.jsx(Y,{children:t.jsxs(Z,{children:[t.jsx(g,{children:t.jsx(u,{type:"text",id:`name-${i}`,name:`foods[${i}].name`,placeholder:"The name of the product or dish",onChange:d.handleChange,value:o.name})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`carbonohidrates-${i}`,name:`foods[${i}].nutrition.carbohydrates`,placeholder:"Carbonoh.",onChange:d.handleChange,value:o.nutrition.carbohydrates})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`protein-${i}`,name:`foods[${i}].nutrition.protein`,placeholder:"Protein",onChange:d.handleChange,value:o.nutrition.protein})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`fat-${i}`,name:`foods[${i}].nutrition.fat`,placeholder:"Fat",onChange:d.handleChange,value:o.nutrition.fat})}),t.jsx(g,{children:t.jsx(u,{type:"number",id:`calories-${i}`,name:`foods[${i}].calories`,placeholder:"Calories",onChange:d.handleChange,value:o.calories})}),t.jsx(tt,{type:"button",onClick:()=>f(i),children:t.jsx("img",{src:et,alt:"Trash"})})]})},i))}),t.jsxs(it,{children:[t.jsx(at,{type:"button",onClick:s,children:"Cancel"}),t.jsx(nt,{type:"submit",children:"Confirm"})]})]})]})})}const Pt=()=>{const s=B(A),y=B(G);c.useEffect(()=>{s&&s.consumedMealsByDay&&(console.log(s.consumedMealsByDay),console.log(y))},[s]);const[h,w]=c.useState([{title:"Breakfast",image:z,totalCarbohydrates:0,totalProtein:0,foods:[]},{title:"Lunch",image:I,totalCarbohydrates:0,totalFat:0,totalProtein:0,foods:[]},{title:"Dinner",image:S,totalCarbohydrates:0,foods:[]},{title:"Snack",image:E,totalCarbohydrates:0,foods:[]}]);c.useEffect(()=>{if(s&&s.consumedMealsByDay){const e=s.consumedMealsByDay.breakfast||{},r=s.consumedMealsByDay.lunch||{},l=s.consumedMealsByDay.dinner||{},p=s.consumedMealsByDay.snack||{};e&&r&&l&&l&&w([{title:"Breakfast",image:z,totalCarbohydrates:e!==0?e.totalCarbohydrates:0,totalFat:e!==0?e.totalFat:0,totalProtein:e!==0?e.totalProtein:0,foods:e!==0?e.foods?e.foods:[]:[]},{title:"Lunch",image:I,totalCarbohydrates:r!==0?r.totalCarbohydrates:0,totalFat:r!==0?r.totalFat:0,totalProtein:r!==0?r.totalProtein:0,foods:r!==0?r.foods?r.foods:[]:[]},{title:"Dinner",image:S,totalCarbohydrates:l!==0?l.totalCarbohydrates:0,totalFat:l!==0?l.totalFat:0,totalProtein:l!==0?l.totalProtein:0,foods:l!==0?l.foods?l.foods:[]:[]},{title:"Snack",image:E,totalCarbohydrates:p!==0?p.totalCarbohydrates:0,totalFat:p!==0?p.totalFat:0,totalProtein:p!==0?p.totalProtein:0,foods:p!==0?p.foods?p.foods:[]:[]}])}},[s]);const[n,j]=c.useState(window.innerWidth<834);c.useEffect(()=>{const e=()=>{j(window.innerWidth<834)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);const[m,b]=c.useState(null),[d,P]=c.useState(null),f=e=>{b(e!==m?e:null)},o=e=>{P(e!==m?e:null)},i=()=>{f()};return t.jsx(ot,{children:h&&h.map(e=>t.jsxs(st,{children:[m===e&&t.jsx(rt,{styles:{zIndex:"10"},onClose:()=>f(e),image:e.image,mealType:e.title,onRecord:i}),t.jsxs(dt,{children:[t.jsx(lt,{src:e.image,alt:"Plate"}),t.jsx(ct,{children:e.title}),t.jsxs(pt,{children:[t.jsxs(v,{children:[t.jsx(k,{children:"Carbonohidrates:"}),t.jsx(C,{children:e.totalCarbohydrates})]}),t.jsxs(v,{children:[t.jsx(k,{children:"Protein:"}),t.jsx(C,{children:e.totalFat})]}),t.jsxs(v,{children:[t.jsx(k,{children:"Fat:"}),t.jsx(C,{children:e.totalProtein})]})]})]}),t.jsx(ht,{children:t.jsxs(xt,{children:[e.foods.map((r,l)=>t.jsxs(T,{children:[t.jsx(W,{children:l+1}),n?t.jsxs(mt,{children:[t.jsx($,{children:r.name}),t.jsxs(L,{children:[t.jsxs(M,{children:[t.jsx(F,{children:"Carb."}),t.jsx(x,{children:r.nutrition.carbohydrates})]}),t.jsxs(M,{children:[t.jsx(F,{children:"Prot."}),t.jsx(x,{children:r.nutrition.protein})]}),t.jsxs(M,{children:[t.jsx(F,{children:"Fat."}),t.jsx(x,{children:r.nutrition.fat})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsx($,{children:r.name}),t.jsxs(L,{children:[t.jsx(x,{children:r.nutrition.carbohydrates}),t.jsx(x,{children:r.nutrition.protein}),t.jsx(x,{children:r.nutrition.fat})]})]}),t.jsxs(ft,{onClick:()=>o(r),children:[t.jsx(gt,{children:t.jsx("use",{href:`${D}#icon-edit`})}),t.jsx(ut,{children:"Edit"})]}),d===r&&t.jsx(bt,{styles:{zIndex:"100"},onClose:()=>o(e),image:e.image,mealType:e.title,onRecord:i,meal:r})]},l)),t.jsxs(T,{children:[t.jsx(W,{children:e.foods.length+1}),t.jsxs(yt,{children:[t.jsx(wt,{children:t.jsx("use",{href:`${D}#icon-add`})}),t.jsx(jt,{onClick:()=>f(e),children:"Record your meal"})]})]})]})})]},e.title))})},vt=a.div`
        display: flex;
        align-items: center;
        max-width: 1372px;
        margin-left: auto;
        margin-right: auto;
        @media screen and (min-width: 834px) and (max-width: 1440px){
                width: 780px;
                /* padding-left: 16px; */
        }
        @media screen and (max-width: 834px){
                max-width: 320px;   
        }
`,kt=a.h1`
       font-family: Poppins;
        font-size: 30px;
        font-style: normal;
        font-weight: 500;
        line-height: 36px;
        margin-right: 12px;
        @media screen and (max-width: 834px) {
                font-size: 24px;
                line-height: 30px;
        }
`,Ct=a(H)`
        width: 24px;
        height: 24px;
        display: inline-block;
        cursor: pointer;      
        margin-right: 12px ;
`,Mt=a.svg`
        width: 24px;
        height: 24px;
        stroke: var(--primary-text-color);
        fill:transparent;
        transform: rotate(180deg);
        transition:
                stroke 0.3s;
        &:hover,
        &:focus {
                stroke: var(--primary-btn-color);
        }
        
`,Ft=()=>t.jsxs(vt,{children:[t.jsx(Ct,{to:"/main",children:t.jsx(Mt,{children:t.jsx("use",{href:`${D}#icon-arrow-right`})})}),t.jsx(kt,{children:"Diary"})]});function zt(){return t.jsxs("div",{children:[t.jsx(Ft,{}),t.jsx(Pt,{})]})}export{zt as default};
